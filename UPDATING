This file documents some of the problems you may encounter when upgrading
your ports.  We try our best to minimize these disruptions, but sometimes
they are unavoidable.

You should get into the habit of checking this file for changes each time
you update your ports collection, before attempting any port upgrades.

20181111
  AFFECTS: users of graphics/mesa-libs
  AUTHOR: jbeich@FreeBSD.org

  Wayland support has been enabled in ports where it doesn't exclude
  X11 support in order to make the binary packages usable with Wayland
  compositors. If you get strange build failures re-run "make config"
  to pick up the new defaults. If the extra dependencies are not
  desired add the following to make.conf:

    OPTIONS_UNSET += WAYLAND

20181109
  AFFECTS: users of security/ossec-hids-server
  AUTHOR: dominik.lisiak@bemsoft.pl

  The "ossechids_enable" rc variable has been renamed to "ossec_hids_enable".

  If using database output, you need to recreate database using new schema
  provided in /usr/local/share/doc/ossec-hids.

20181109
  AFFECTS: users of security/ossec-hids-local
  AUTHOR: dominik.lisiak@bemsoft.pl

  The "ossechids_enable" rc variable has been renamed to "ossec_hids_enable".

  If using database output, you need to recreate database using new schema
  provided in /usr/local/share/doc/ossec-hids.

20181109
  AFFECTS: users of security/ossec-hids-client
  AUTHOR: dominik.lisiak@bemsoft.pl

  The ossec-hids-client port has been renamed to ossec-hids-agent.
  Portmaster users will need to run this command:

  portmaster -o security/ossec-hids-agent security/ossec-hids-client

  If the switch doesn't happen automatically for you, just delete the
  ossec-hids-client package and install ossec-hids-agent.

  The "ossechids_enable" rc variable has been renamed to "ossec_hids_enable".

20181104:
  AFFECTS: users of sysutils/ansible*
  AUTHOR: lifanov@FreeBSD.org

  Default Ansible configuration location changed to LOCALBASE/etc/ansible
  instead of a per-flavor directory. If you use system-wide Ansible
  configuration, please migrate from a flavored directory to a common
  one:

  # mv /usr/local/etc/py27-ansible /usr/local/etc/ansible

20181031:
  AFFECTS: users of www/node
  AUTHOR: bhughes@FreeBSD.org

  The www/node port has been updated to Node.js v11.0.0, the latest
  upstream release. A new port, www/node10, has been created for the
  v10.x LTS branch. Users wanting to stay on v10.x can replace www/node
  with www/node8 with one of the following commands:

  # pkg install www/node10
    or
  # portmaster -o www/node10 www/node
    or
  # portupgrade -o www/node10 www/node

20181022:
  AFFECTS: users of lang/php71
  AUTHOR: joneum@FreeBSD.org

  The default version of PHP has been switched from 7.1 to 7.2.

  If you use binary packages you should make a list of php packages
  before running 'pkg upgrade':

  # pkg info php7\* > ~/installed-php-ports-list

  After the upgrade, check with such list if all your php extensions
  are still installed, and reinstall them if needed.

  If you use mod_php71 you need to deinstall it and install mod_php72.

20181020:
  AFFECTS: users of security/libressl
  AUTHOR: brnrd@FreeBSD.org

  The port has been updated to the latest stable version 2.8 of LibreSSL.
  The shared library versions of the libraries have been bumped.

  After upgrading, manually update all packages that depend on any of the
  libraries provided by LibreSSL (libssl, libcrypto and libtls) since the
  versions of these libraries have changed. Normally, you can obtain the
  list of dependent software by running the following command:

  # pkg info -r libressl

  Then you should rebuild all ports depending on libressl to avoid dangling
  shared library dependencies. Poudriere and pkg handle this correctly,
  portmaster and portupgrade users can use the following to rebuild all
  dependent ports.

  Portmaster users:
      portmaster -r libressl
  Portupgrade users:
      portupgrade -fr security/libressl

20181018:
  AFFECTS: users of security/hitch
  AUTHOR: zi@FreeBSD.org

  Hitch has been updated to run as the hitch user/group, instead of the
  previous default of nobody/nobody.  You should review your hitch
  configuration to ensure that everything has been updated to reflect
  this change.

20181014:
  AFFECTS: users of sysutils/ansible
  AUTHOR: lifanov@FreeBSD.org

  Ansible has been updated to 2.7.0. Please follow the porting guide
  to update the rulesets:

  https://docs.ansible.com/ansible/devel/porting_guides/porting_guide_2.7.html

  If you wish to stay with 2.6 version, you can switch
  to new sysutils/ansible2.6 port, which tracks stable 2.6 branch:

  # pkg set -n ansible:ansible26

20181010:
  AFFECTS: users of mail/courier-imap and other courier ports
  AUTHOR: madpilot@FreeBSD.org

  Courier-IMAP 5.0.0 added IMAP UTF8 support, and converted maildir
  folders' names to Unicode.

  Updating an existing system to Courier-IMAP 5.0, and later,
  requires a manual one-time conversion of all existing maildirs
  using the maildirmake command. See the maildirmake(1) manual page
  for more information.

  All other courier ports accessing maildirs also need to be updated
  at the same time.

20181009:
  AFFECTS: users of devel/pecl-xdebug*
  AUTHOR: pizzamig@FreeBSD.org

  xdebug 2.6.1 (devel/pecl-xdebug) is the new default version and it supports
  PHP from 7.0 to 7.2 included.
  If you're using PHP 5.6, the previous compatible xdebug version is still
  available in devel/pecl-xdebug25
  If you're using PHP 7.3, the only compatible xdebug version is available
  in devel/pecl-xdebug-devel

20180930:
  AFFECTS: users of DRM components
  AUTHOR: jmd@FreeBSD.org

  A metaport, graphics/drm-kmod, was introduced for users of both the LinuxKPI-
  based DRM components as well as the legacy ones. It is recommended to use the
  metaport from now on, which will select a recommended DRM version based on
  the FreeBSD version.

20180924:
  AFFECTS: www/libresonic-standalone
  AUTHOR: jlh@FreeBSD.org

  HTTPS support has been removed from the port, as it will be removed upstream:
    https://github.com/Libresonic/libresonic/issues/125#issuecomment-256227104

  In order to avoid strange behavior for users who are using this feature, the
  rc.d script will fail fast if libresonic_ssl="YES". You should remove the
  following variables from rc.conf(5): libresonic_ssl libresonic_ssl_keystore
  libresonic_ssl_password.

  # sed -i '' /libresonic_ssl/d /etc/rc.conf

  Users needing SSL are encouraged to use an HTTP reverse-proxy. Example
  configurations can be found here:
    https://github.com/Libresonic/libresonic/issues/119

20180922:
  AFFECTS: users of graphics/ilmbase, graphics/OpenEXR
  AUTHOR: mandree@FreeBSD.org

  The IlmBase package has been updated to 2.3.0.
  The OpenEXR package has been renamed to openexr and updated to 2.3.0.

  The PORTREVISION of all ports requiring either has been bumped to
  ease the reubuilds, and where there were versions in the file names,
  these have been removed from the *_DEPENDS lines for easier maintenance.

  A full ports or package upgrade should just work.

  If you are doing partial updates, be sure to rebuild and reinstall
  all packages that require either of OpenEXR or ilmbase.
  Normally, these can be listed by running:

  # pkg info -q -r OpenEXR ilmbase  | sort -u | xargs pkg info -q -o

20180905:
  AFFECTS: users of lang/php56
  AUTHOR: tz@FreeBSD.org

  The default version of PHP has been switched from 5.6 to 7.1.

  If you use binary packages you should make a list of php packages
  before running 'pkg upgrade':

  # pkg info php5\* > ~/installed-php-ports-list

  After the upgrade, check with such list if all your php extensions
  are still installed, and reinstall them if needed.

  If you use mod_php56 you need to deinstall it and install mod_php71.

20180901:
  AFFECTS: net/samba48
  AUTHOR: timur@FreeBSD.org

  Samba ports from now on are not dependent from the databases/ldb* ports,
  as the link between Samba and LDB is too tight and each next major Samba
  release requires it's own major LDB release. Please, remove installed
  version of databases/ldb13 from your system with:

  # pkg delete -f databases/ldb13

20180901:
  AFFECTS: net-mgmt/librenms
  AUTHOR: dvl@FreeBSD.org

  As of version 1.42, to conform with man hier, logs and rrd files have 
  relocated outside the WWW directory. When upgrading from < 1.42 to more
  recent versions, the following steps are required.

  You must update config.php and manually relocate the rrd and log files.
  Before upgrading, please stop librenms,  update the configuration, and
  relocate the files.

  If you find graphs are not updating, fping >= 4.0 requires an IPv6
  address. Adding an IPv6 address should fix graphing.

  Please add these entries to config.php:

  $config['installed_from_package'] = true;
  $config['log_dir'] = '/var/log/librenms';
  $config['rrd_dir'] = '/var/db/librenms/rrd';

  To relocate the files:

  mkdir /var/log/librenms /var/db/librenms
  chown www:ww: /var/log/librenms /var/db/librenms
  cd /usr/local/www/librenms
  mv rrd /var/db/librenms/
  mv logs/librenms.log /var/log/librenms/
  rmdir logs

  An application key is required. Please follow these steps to generate it:

  cd /usr/local/www/librenms
  cp -i .env.sample .env

  You might need to set your database details in that file.
  Then run:

  php artisan key:generate

  The output should look something like this:

  **************************************
  *     Application In Production!     *
  **************************************

   Do you really wish to run this command? (yes/no) [no]:
   > y

  Application key [base64:P62La9V........qw=] set successfully.
 

20180901:
  AFFECTS: users of samba46
  AUTHOR: antoine@FreeBSD.org

  The default version of samba has been switched from 4.6 to 4.7.
  Upgrade instructions:

  For package users having samba46 installed indirectly (as a dependency):
    # pkg upgrade

  For package users having samba46 installed directly (leaf port):
    # pkg upgrade
    # pkg install samba47

  For ports users:
    If you want to keep samba46, add DEFAULT_VERSIONS+= samba=4.6 to make.conf

    If you want to upgrade to samba47, remove samba46:
    # pkg delete -f samba46

    Portmaster users:
    # portmaster net/samba47
    # portmaster -a

    Portupgrade users:
    # portinstall net/samba47
    # portupgrade -a

20180813:
  AFFECTS: net/geoipupdate
  AUTHOR: adamw@FreeBSD.org

  There have been some breaking changes to the GeoIP.conf in version 3.0.0.
  Read about the changes at
    https://github.com/maxmind/geoipupdate/blob/master/ChangeLog.md
  and either edit your GeoIP.conf as needed, or recreate it from
  GeoIP.conf.sample.

20180810:
  AFFECTS: databases/postgresql??-server
  AUTHOR: girgen@FreeBSD.org

  The PostgreSQL server packages are no longer built with support for the XML
  datatype per default. To retain support for the XML datatype you should build
  the port and check the XML option in the option dialog. The reason for this
  is the bad security reputation of libxml2.
 
20180806:
  AFFECTS: www/tt-rss
  AUTHOR: thierry@FreeBSD.org

  tt-rss now uses pdo_mysql/pgsql for database acccess; a web server reload
  will be required if pdo ext. isn't installed.

20180804:
  AFFECTS: net-mgmt/zabbix*-server
  AUTHOR: dbaio@FreeBSD.org

  The JAVAGW option was removed from the Zabbix Server and an additional slave
  port was created, zabbix*-java, it installs only Zabbix Java Gateway files,
  this way is possible to deploy a Zabbix Java Gateway without the need to
  install Zabbix Server components.

  If you are using the JAVAGW option on Zabbix Server, please, install now the
  new zabbix*-java port.

20180803
  AFFECTS: users of net/openntpd
  AUTHOR: naddy@FreeBSD.org

  The numerical ID of the "_ntp" user had to be moved after 12.0-CURRENT
  (revision 336525) took over its value for a user "ntpd" that uses a
  different privilege model.

  To avoid clashes between the two users, please remove the openntpd
  package, delete the old UID with

  # pw userdel _ntp

  and re-install openntpd.

20180731:
  AFFECTS: users of audio/sndio
  AUTHOR: tobik@FreeBSD.org

  sndiod(8) will now use the default audio device /dev/dsp instead
  of /dev/dsp0 if no device was specified.

  The location of ~/.aucat_cookie has moved to ~/.sndio/cookie.  If
  you share audio devices via sndiod(8) on the network or between
  local users, please migrate it manually to the new location to
  guarantee a smooth upgrade.

20180731:
  AFFECTS: users of x11/xorg and all ports with USE_XORG=*proto
  AUTHOR: zeising@FreeBSD.org

  The xorg *proto packages have all been merged into one package,
  x11/xorgproto.  This might cause issues with upgrading.  If you
  get conflicts between xorgproto and old *proto packages, please
  remove the old package and install xorgproto again.

  In order to remove all orphaned ports, including all *proto port,
  the following can be used after the ports tree has been updated:
  pkg version -l \? | cut -f 1 -w | grep -v compat | xargs pkg delete -fy

20180728:
  AFFECTS: users who upgrade from security/kc to security/kc24
  AUTHOR: pi@FreeBSD.org

  The ondisk format changes from kc 2.3 to kc 2.4, so please
  read the kc24 pkg-message file before the upgrade. It describes
  how to create a backup, the xml dump and how to import the
  xml dump afterwards.

20180725:
  AFFECTS: users of textproc/ibus-typing-booster
  AUTHOR: thierry@FreeBSD.org

  Due to a migration from IBusConfig to GSettings, the old settings are
  unfortunately lost, so one has to open the setup tool and recreate ones
  favourite settings.

20180714:
  AFFECTS: users of dns/dnsdist
  AUTHOR: cpm@FreeBSD.org

  After discussing with several users, we noticed that quite a lot of them
  were not aware that enabling the dnsdist's console without a key, even
  restricted to the local host, could be a security issue and allow privilege
  escalation by allowing an unprivileged user to connect to the console and
  execute Lua code as the dnsdist user. We therefore decided to refuse any
  connection to the console until a key has been set, so please check that
  you do set a key before upgrading if you use the console.  

  For further details read: 
  https://blog.powerdns.com/2018/07/10/dnsdist-1-3-2-released/

20180704:
  AFFECTS: users of www/gitlab
  AUTHOR: mfechner@FreeBSD.org

  The gitlab port uses the package from gitlab.org instead of github.org.
  For this the port was renamed from gitlab to gitlab-ce.
  Please follow the instructions very carefully to not lose your data!
  Not only the package was renamed, also the directory name changed.

  You can find the current instruction here:
  https://gitlab.fechner.net/mfechner/Gitlab-docu/blob/master/update/10.8-11.0-freebsd.md

  Please note the update was only tested for an update from 10.8.5 to 11.0.2.
  If your version of gitlab was released before 2014-03-13 you cannot update
  to this version. You need to make an intermediate update to an earlier
  version before.

20180701:
  AFFECTS: users of devel/bats
  AUTHOR: lifanov@FreeBSD.org

  The devel/bats port has been renamed to devel/bats-core to match the
  new upstream project.

20180630:
  AFFECTS: users of net-im/ejabberd
  AUTHOR: ashish@FreeBSD.org

  In version 18.06, upstream has removed support for IRC transport.

20180625:
  AFFECTS: users of PHP based applications like drush
  AUTHOR: mfechner@FreeBSD.org

  Flavors are being added to PHP applications. If you use PHP 5.6 you need:

  # pkg set -n drush:drush-php56

  For more details see 20180611.

20180612:
  AFFECTS: users of the nox flavor of editors/emacs-devel
  AUTHOR: jrm@FreeBSD.org

  The package name for the nox flavor of editors/emacs-devel changed from
  emacs-devel_nox to emacs-devel-nox.  To install the new package, run

  # pkg install emacs-devel-nox

  pkg should remove the old and install the new package.

20180612:
  AFFECTS: users of packages that depend on Emacs
  AUTHOR: jrm@FreeBSD.org

  With the release of Emacs version 26.1, the major version of editors/emacs
  changed from 25 to 26, so the names of packages that depend on Emacs have also
  changed.  For example, pdf-tools-emacs25-0.80.79_1 is now called
  pdf-tools-emacs26-0.80.79_1.  The name change means simply running `pkg
  upgrade` will not upgrade foo-emacs25-x to foo-emacs26-x.

  To list the packages to upgrade, use

  # pkg info \*emacs25\*

  then install the new version for each with

  # pkg install foo-emacs26

  pkg should remove the old and install the new packages.

20180611:
  AFFECTS: users of PHP based applications
  AUTHOR: mat@FreeBSD.org

  Flavors are being added to PHP applications.  When a port is flavorized, pkg
  needs to be told about the name change, for example, if PHP 5.6 is the one
  you need:

  # pkg set -n squirrelmail:squirrelmail-php56

  Most port will have packages for all PHP versions present in the ports tree,
  but some may not be compatible with a specific version.

  To get the available flavors, pkg rquery can be used:

  # pkg rquery %n mail/squirrelmail
  squirrelmail-php56
  squirrelmail-php70
  squirrelmail-php71
  squirrelmail-php72

20180602:
  AFFECTS: users of net/frr
  AUTHOR: olivier@FreeBSD.org

  Due to regression detected in FRR version 4.0, port was renamed to frr4
  to prepare re-introduction of frr3 port version.

  To rename the installed package to match the new naming scheme, run:
  # pkg set -n frr:frr4

20180529:
  AFFECTS: users of textproc/ibus-typing-booster
  AUTHOR: thierry@FreeBSD.org

  Attention, this release merges all engines into one. Therefore, the
  engine names had to change. The old engine names like "German - DE
  (Typing Booster)", "Hindi - HI (Typing Booster)" don't exist anymore!
  If one has entries for them in the Gnome Control Center or in
  ibus-setup, one needs to remove these old entries and add the new
  engine name "Other (Typing Booster)".

20180518:
  AFFECTS: users of sysutils/ansible*
  AUTHOR: lifanov@FreeBSD.org

  Ansible ports are now flavored. Package names for Ansible changed
  to include python version. Poudriere and package users don't need
  to do anything.

  To rename an installed package to match the new naming scheme,
  for example, for ansible24, run:

   # pkg set -n ansible24:py27-ansible24

20180514:
  AFFECTS: users of www/gitlab
  AUTHOR: mfechner@FreeBSD.org

  Gitlab-pages support was removed as new version does not compile.
  If you require gitlab-pages do not update to version 10.7.3 till it is
  fixed upstream.
  You can find the bug report here:
  https://gitlab.com/gitlab-org/gitlab-pages/issues/143

20180513:
  AFFECTS: users of net/xrdp
  AUTHOR: meta@FreeBSD.org

  net/xrdp has been updated from 0.6.2 to 0.9.6. There are significant
  changes between these versions. You should consider backing up your
  configuration files such as xrdp.ini and sesman.ini, and then migrate
  configuration files by hand.

  Regarding km-*.ini, don't use the old files. They can be safely replaced
  with new ones.

20180507:
  AFFECTS: users of math/suitesparse who build it locally
  AUTHOR: yuri@FreeBSD.org

  The suitesparse needs to be uninstalled before math/suitesparse can be
  correctly built. This is true for the version 5.2.0 and prior versions.

20180505:
  AFFECTS: users of www/gitea
  AUTHOR: stb@lassitu.de

  The www/gitea port no longer requires shell/bash.  If you want to
  stop using bash and deinstall the package, make sure to set the
  configuration in etc/gitea/conf/app.ini, section [repository],
  SCRIPT_TYPE to "sh".  See app.ini.sample for an example.

20180501:
  AFFECTS: users of www/node
  AUTHOR: bhughes@FreeBSD.org

  The www/node port has been udpated to Node.js v10.0.0, the latest
  upstream release. This is a major release, including many significant
  changes. Users are encouraged to read the release announcements before
  upgrading:

  https://nodejs.org/en/blog/release/v10.0.0/

  In particular, Node.js now depends on OpenSSL 1.1.0h, so the
  BUNDLED_SSL option is enabled by default. Users can disable this
  option when using security/openssl-devel as their default SSL library.

20180430:
  AFFECTS: users of news/nntp
  AUTHOR: dinoex@FreeBSD.org

  The option INETD was removed. If you used inetd, please change the path
  in /etc/inetd.conf from /usr/local/sbin/nntpd to /usr/local/libexec/nntpd.

20180428:
  AFFECTS: users of security/libressl
  AUTHOR: brnrd@FreeBSD.org

  The port has been updated to the latest stable version 2.7 of LibreSSL.
  The shared library versions of the libraries have been bumped.

  After upgrading, manually update all packages that depend on any of the
  libraries provided by LibreSSL (libssl, libcrypto and libtls) since the
  versions of these libraries have changed. Normally, you can obtain the
  list of dependent software by running the following command:

  # pkg info -r libressl

  Then you should rebuild all ports depending on libressl to avoid dangling
  shared library dependencies. Poudriere and pkg handle this correctly,
  portmaster and portupgrade users can use the following to rebuild all
  dependent ports.

  Portmaster users:
      portmaster -r libressl
  Portupgrade users:
      portupgrade -fr security/libressl

20180427:
  AFFECTS: users of sysutils/zrepl
  AUTHOR: woodsb02@FreeBSD.org

  The zrepl update to 0.0.3 includes the following breaking changes:
  - Snapshots are automatically bookmarked and pruning of bookmarks must
    be configured by adding the keep_bookmarks parameter to the prune
    policy section of the zrepl configuration file (source side only).
    Be sure to understand the meaning bookmarks have for maximum
    allowable replication downtime.
  - The ssh+stdinserver transport protocol has changed, requiring zrepl
    to be updates on both the sending and receiving side, and the daemon
    restarted on both sides.
  - The first outlet in the global.logging section of the configuration
    file is now used for logging meta-errors (e.g. problems encountered
    when writing to other logging outlets).

20180425:
  AFFECTS: users of databases/pecl-redis
  AUTHOR: daniel@blodan.se

  pecl-redis 4.0.0 breaks backwards compatibility, users 
  not aware if you are using the changed functionality or not
  should swap to databases/pecl-redis3

20180417:
  AFFECTS: users of dns/dnscrypt-proxy2
  AUTHOR: egypcio@googlemail.com

  DNSCrypt-Proxy 2 has been updated to 2.0.10 and the configuration file
  has changed from ${PREFIX}/etc/dnscrypt-proxy.toml to
  ${PREFIX}/etc/dnscrypt-proxy/dnscrypt-proxy.toml.

20180416:
  AFFECTS: users of mail/postgrey
  AUTHOR: ports.maintainer@evilphi.com

  If you use any of the optional make.conf variables to specify the
  postgrey user, group, db dir, or run dir when building the port, you will
  need to change the prefix from PG_ to POSTGREY_*.  The variables were
  renamed to solve a namespace collision with the PostgreSQL ports.

20180412:
  AFFECTS: users of devel/php-composer
  AUTHOT: madpilot@FreeBSD.org

  Flavors have been added to the composer port with the update to
  1.6.3. Due to the change in PKGNAME pkg(and other tools) will not
  notice the update. It is required to tell pkg about the name
  change, for example:

  # pkg set -n php-composer:php56-composer

20180410:
  AFFECTS: users of KDE SC4
  AUTHOR: kde@FreeBSD.org

  Most of KDE Applications 17.12.3 have now landed in the ports tree.
  There are still some missing pieces, that will follow soon.

  As mentioned in the commit messages, users of KDE SC4 should stick with the
  <foo>-kde4 named package.

  As the MOVED entries for ports like databases/akonadi-kde4 have been removed
  in the process of updating (as there now is again a databases/akonad), there
  might be issues for people that update from a too old installed package list
  with portmaster.

  These should be fixable by issuing a command à la
  # pkg set --change-origin databases/akonadi:databases/akonadi-kde4 akonadi

20180409:
  AFFECTS: users of net-im/matterircd
  AUTHOR: norrland@nullbyte.se

  Matterircd has been updated to 0.17.0 and mattermost configuration settings
  need to be migrated to [mattermost] section. See matterircd.toml.sample.

20180404:
  AFFECTS: users of www/nextcloud
  AUTHOR: brnrd@FreeBSD.org

  With the 13.0.1 update the path for Apps bundled with the package has
  changed from "apps" to "apps-pkg". You must add an entry to the
  "apps_paths" array in config/config.php of your nextcloud installation,
  a patch for the default installation can be applied with:

  # cd /usr/local/www/nextcloud
  # su -m www -c "php ./occ config:import < /usr/local/share/nextcloud/fix-apps_paths.json"

20180401:
  AFFECTS: users of mail/dovecot and mail/dovecot-pigeonhole
  AUTHOR: adamw@FreeBSD.org

  Dovecot has been upgraded to 2.3.1, and pigeonhole to 0.5.1. Most
  existing dovecot installations MUST be modified for 2.3, but for
  most users the modifications are simple.

  Modify your Dovecot conf.d/ files before spinning up 2.3.1. The
  upgrading instructions are detailed here:

  	https://wiki2.dovecot.org/Upgrading/2.3

20180330:
  AFFECTS: users of lang/perl5*
  AUTHOR: mat@FreeBSD.org

  The default Perl version has been switched to Perl 5.26.  If you are using
  binary packages to upgrade your system, you do not have anything to do, pkg
  upgrade will do the right thing.  For the other people, follow the
  instructions in entry 20161103, it should still be the same.

20180325:
  AFFECTS: users of net/samba48
  AUTHOR: timur@FreeBSD.org

  New Samba 4.8 upgrades the relevant database files in the way, that doesn't
  allow easy fallback to the previous versions of Samba. So, before upgrading
  to the new version make a backup of the /var/db/samba4/ directory.

  Full list of changes, new features and upgrade procedure is available at:

        https://www.samba.org/samba/history/samba-4.8.0.html

  Please, read it carefully before upgrading!.

20180320:
  AFFECTS: users of x11/sterm
  AUTHOR: pkubaj@anongoth.pl

  The user-defined options in config.h have changed.  You should
  compare your config.h file with the default one and change
  appropriately.

20180319:
  AFFECTS: users of dns/dnsmasq
  AUTHOR: mandree@FreeBSD.org

  Note that with dnsmasq 2.79, some parts of the interface have changed in an
  incompatible way versus previous versions. This comprises changed recursion
  behaviour, signature support, a change for SIGINT (vs. SIGHUP) behaviour.

  Note especially that dnsmasq will no longer answer non-recursive queries
  unless it is marked authoritative!  Be sure to see the manual page for the
  various --auth-* options, such as --auth-zone.

  Please see the CHANGELOG that ships with dnsmasq for details.

20180317:
  AFFECTS: users of multimedia/plexpy
  AUTHOR: feld@FreeBSD.org

  Plexpy project has been renamed to Tautulli due to copyright
  infringement. The software also has received a major update. Please
  see the following upgrade instructions:

  - Install multimedia/tautulli
  - Create /var/db/tautulli, owned by the user you will run the daemon as
    (default: nobody).
  - Copy your config.ini and plexpy.db to /var/db/tautulli
  - Enable the service and start the software

   Tautulli should automatically find your database file, rename it to
   tautulli.db, and perform the required updates.

20180310:
  AFFECTS: users of security/openssl
  AUTHOR: brnrd@FreeBSD.org

  The EXPCIPHERS option has been removed from the security/openssl port.
  Use the security/openssl-unsafe port if you require this feature.

20180309:
  AFFECTS: users of net/unison
  AUTHOR: madpilot@FreeBSD.org

  Unison has been upgraded to version 2.51, which uses a different
  wire protocol than 2.48 did.  In order to support synchronization
  with other computers where Unison is still at version 2.48, a new
  port net/unison248 has been created.  It provides unison248 and,
  for the x11 flavor, also unison248-text.  This unison248 port can
  be installed in parallel with the existing net/unison port.

20180308:
  AFFECTS: */php* */pecl* */pear*
  AUTHOR: mat@FreeBSD.org

  PHP extensions and modules have been flavored.

  People using Poudriere 3.2+ and binary packages do not have to do anything if
  they are using PHP applications.

  PHP modules and extensions may have change their names from php5- or php7- to
  fully versionned phpXY-.
  PECL extensions and PEAR modules package names have changed from pecl- and
  pear- to phpXX-pecl and phpXX-pear-.

  To rename an installed package to match the new naming scheme, for example,
  for the imagick pecl extension, run:

    # pkg set -n pecl-imagick:php56-pecl-imagick

  For other people, to build the PHP 7.2 version of, for example,
  databases/php-memcached, you need to run:

    # make FLAVOR=php72 install

20180220:
  AFFECTS: users of www/nextcloud
  AUTHOR: brnrd@FreeBSD.org

  The file and directory permissions of Nextcloud have changed. Write
  permissions have been removed from all directories except `data' and
  `config'. For the updater to work, the app store of your installation
  must be disabled. To disable the app-store prior to updating the
  package:

  # cd /usr/local/www/nextcloud
  # su -m www -c "php ./occ config:system:set appstoreenabled --value=false --type=boolean"

  If you've already updated your nextcloud package, you must manually edit
  the configuration of nextcloud (config/config.php) and add

  	'appstoreenabled' => false,

  to the CONFIG array before the updater will run.

20180214:
  AFFECTS: users of lang/ruby23
  AUTHOR: swills@FreeBSD.org

  The default ruby version has been updated from 2.3 to 2.4.

  If you compile your own ports you may keep 2.3 as the default version by
  adding the following lines to your /etc/make.conf file:

  #
  # Keep ruby 2.3 as default version
  #
  DEFAULT_VERSIONS+=ruby=2.3

  If you wish to update to the new default version, you need to first stop any
  software that uses ruby. Then, you will need to follow these steps, depending
  upon how you manage your system.

  If you use pkgng, simply upgrade:
  # pkg upgrade

  If you use portmaster, install new ruby, then rebuild all ports that depend
  on ruby:
  # portmaster -o lang/ruby24 lang/ruby23
  # portmaster -R -r ruby-2.4

  If you use portupgrade, install new ruby, then rebuild all ports that depend
  on ruby:

  # pkg delete -f ruby portupgrade
  # make -C /usr/ports/ports-mgmt/portupgrade install clean
  # pkg set -o lang/ruby23:lang/ruby24
  # portupgrade -x ruby-2.4.\* -fr lang/ruby24

20180209:
  AFFECTS: users of japanese/lookup
  AUTHOR: yasu@utahime.org

  japanese/lookup is update to 1.99.96.20130920. This version is not
  compatible with previous version 1.4.1 and incompatibility includes
  how to setup. See info of Lookup for detail.

20180209:
  AFFECTS: users of net-mgmt/pmacct
  AUTHOR: pi@FreeBSD.org

  To allow separete pmacctd instances per interface, use

    pmacctd_enable="YES"
    pmacctd_interfaces="re1 re2"

  in /etc/rc.conf. The path to the config files will be

    /usr/local/etc/pmacct/<interface>

20180208:
  AFFECTS: users of mail/mailman*
  AUTHOR: mandree@FreeBSD.org

  In order to overcome complaints about mismatched checksums in
  Mailman/Default.py, mailman now configures the DEFAULT_EMAIL_HOST
  and DEFAULT_URL_HOST to "localhost" statically, and the rc script
  will check this and refuse to start on next boot.

  Users must configure DEFAULT_EMAIL_HOST and DEFAULT_URL_HOST in
  Mailman/mm_cfg.py properly and add this line below:
  add_virtualhost(DEFAULT_URL_HOST, DEFAULT_EMAIL_HOST)

  A short example has been added to:
  ${PREFIX}/local/share/doc/mailman/FreeBSD-post-install-notes.

  As of 2.1.26_3, the post-install script will add back the prior
  default settings to mm_cfg.py (instead of Defaults.py) if no
  virtual hosts have been defined, to cover the normal use cases
  and initial installation.

20180201:
  AFFECTS: users of editors/emacs* and all ports using Emacs via USES=emacs
  AUTHOR: jrm@FreeBSD.org

  The Emacs ports framework has been updated to support flavors and the
  editors/emacs-nox11 port has been replaced by the nox flavors of
  editors/emacs and editors/emacs-devel.

  Supported Flavors
  --------------------------------------------------------
  editors/emacs:       full canna nox
  editors/emacs-devel: full nox
  ports using Emacs:   full canna nox devel_full devel_nox
  --------------------------------------------------------

  For those using pre-built packages, if

     # pkg upgrade

  does not install the new Emacs package, use one of

     # pkg install emacs
     # pkg install emacs-canna
     # pkg install emacs-nox
     # pkg install emacs-devel
     # pkg install emacs-devel-nox

  For those building their own packages, a flavor other than the default must be
  specified.  For example, to build the nox flavor of editors/emacs, or to build
  the devel_full flavor of a port using Emacs, use

     # poudriere bulk -j 11amd64 editors/emacs@nox
     # poudriere bulk -j 11amd64 print/pdf-tools@devel_full

  or

     # make FLAVOR=nox install
     # make FLAVOR=devel_full

  An alternative to the default flavor, full, for editors/emacs and
  editors/emacs-devel can be set in make.conf.  For example, to specify nox as
  the default flavor for both ports, use

     .if ${.CURDIR:M*/editors/emacs*}
     FLAVOR?=nox
     .endif

  For ports using Emacs, an alternative to the default flavor, full,
  can be also be set in make.conf.  For example, to automatically depend on
  emacs-nox, use

     DEFAULT_VERSIONS+=emacs=nox

20180117:
  AFFECTS: users of x11-toolkits/kf5-kirigami2 and x11/kf5-plasma-framework
  AUTHOR: kde@FreeBSD.org

  Files that were previously installed by kf5-kirigami2 are now installed 
  by kf5-plasma-framework. This can lead to a conflict during the upgrade
  of the packages. 
  It is recommended to first remove the package kf5-kirigami2.

20180115:
  AFFECTS: users of net-p2p/transmission-daemon
  AUTHOR: woodsb02@FreeBSD.org

  The transmission-daemon port has been updated to 2.92_4 to incorporate
  a patch which mitigates DNS rebinding attacks. This will prevent
  clients from being able to connect to the transmission daemon using
  DNS with any hostname other than localhost, unless one of the
  following is done:
    - Enable password authentication, then any hostname is allowed.
      This can be achieved by either:
        - setting rpc-authentication-required to true, and adding
          credentials to the rpc-username and rpc-password fields in
          settings.json (must be done whilst the transmission service is
          stopped); or
        - running transmission-daemon with the following arguments
          (these can be set with transmission_flags in /etc/rc.conf):
          -t -u USERNAME -v PASSWORD
    OR
    - Add the allowed server hostnames to the rpc-host-whitelist setting
      in settings.json (must be done whilst the transmission service is
      stopped). Note that this value is NOT a list of allowed CLIENTS,
      but instead a list of allowed SERVER hostnames.

20180111:
  AFFECTS: users of editors/vim-lite
  AUTHOR: adamw@FreeBSD.org

  The vim-lite port has been renamed to vim-console, because it isn't
  actually any lighter. All three vim packages are built with
  --enable-features=huge. Portmaster users will need to run this
  command:

  	portmaster -o editors/vim-console editors/vim-lite

  If the switch doesn't happen automatically for you, just delete the
  vim-lite package and install vim-console.

20180109:
  AFFECTS: users of www/qt5-webengine
  AUTHOR: kde@FreeBSD.org

  The upgrade of www/qt5-webengine to 5.9.3 may fail if an older version
  of it is installed. It is recommended to either build the port in a
  builder like poudriere, or to deinstall and then doing an install.

20180107:
  AFFECTS: users of security/gnupg and mail/mutt and mail/neomutt
  AUTHOR: adamw@FreeBSD.org

  The invocation for gpg from mutt/neomutt changed between gnupg-2.0
  (which has expired and is now removed) and gnupg-2.2 (the current
  version in the tree). Unless you're using gpgme, PGP-related
  commands may fail in (neo)mutt.

  In all cases, users are strongly urged to use security/gpgme to take
  care of the setup for you. If you prefer to roll your own, the
  following muttrc/neomuttrc entry has been reported to work:

  pgp_decrypt_command="gpg2 %?p?--passphrase-fd 0 --pinentry-mode=loopback? --no-verbose --batch --output - %f"

  See muttrc(5), neomuttrc(5), mutt.org, and neomutt.org for instructions
  on (neo)mutt's gpg and gpgme instructions.

20180102:
  AFFECTS: users of devel/awscli
  AUTHOR: bhughes@FreeBSD.org

  The package name for devel/awscli has changed (back) to just awscli.
  The introduction of flavors erroneously caused the awscli package to
  be renamed to py27-awscli.

20171230:
  AFFECTS: users of net-im/ejabberd
  AUTHOR: ashish@FreeBSD.org

  If you are building ejabberd 17.11 on a host, which already has an older 
  version of ejabberd installed, then build process will fail with "unknown type
  specifier" errors. As a workaround, please uninstall ejabberd before building
  ejabberd.

  This has been reported upstream at:
  https://github.com/processone/ejabberd/issues/2194

20171223:
  AFFECTS: users of dns/dnscrypt-proxy
  AUTHOR: egypcio@googlemail.com

  The 1.9.5_3 update of dns/dnscrypt-proxy replaces the default resolver used
  by dnscrypt-proxy (cisco/OpenDNS) by a random one that does not log entries
  and supports dnssec.

20171223:
  AFFECTS: users of samba44
  AUTHOR: antoine@FreeBSD.org

  The default version of samba has been switched from 4.4 to 4.6.
  Upgrade instructions:

  For package users having samba44 installed indirectly (as a dependency):
    # pkg upgrade

  For package users having samba44 installed directly (leaf port):
    # pkg upgrade
    # pkg install samba46

  For ports users:
    If you want to keep samba44, add DEFAULT_VERSIONS+= samba=4.4 to make.conf

    If you want to upgrade to samba46, remove samba44:
    # pkg delete -f samba44

    Portmaster users:
    # portmaster net/samba46
    # portmaster -a

    Portupgrade users:
    # portinstall net/samba46
    # portupgrade -a

20171218:
  AFFECTS: users of devel/gogs
  AUTHOR: dg@syrec.org

  Gogs user has been changed to "git" and configuration files are now
  located in /usr/local/etc/gogs. Users should update ownership of the
  existing Gogs directories with

  # chown -R git:git /var/db/gogs
  # chown -R git:git /var/log/gogs

  and either move or merge the contents of /var/db/gogs/home/.ssh with
  /usr/local/git/.ssh.  After migration, /var/db/gogs/home can be removed,
  and both the user "gogs" and the group "gogs" should be deleted:

  # rm -rf /var/db/gogs/home
  # pw userdel gogs
  # pw groupdel gogs

20171215:
  AFFECTS: users of finance/gnucash
  AUTHOR: madpilot@FreeBSD.org

  The gnucash port has been converted too use flavors, the GUILE1
  and GUILE2 options have been converted to flavors so that two
  separate packages can be provided.

  Since the next major release of gnucash will drop guile1 support,
  the default flavor package is compiled against guile2, switching
  the previous default.

  Users who intend to stay on the guile1 version should deinstall
  the default gnucash package and install the gnucash-guile1 package.

20171214:
  AFFECTS: all ports users
  AUTHOR: adamw@FreeBSD.org

  Support for some deprecated variables is going to be removed soon. If
  you use any of the following constructs (usually in /etc/make.conf),
  you must switch to the new incantations:

               OLD                                 NEW
  -------------------------------    ------------------------------
  WITH_[...]                         OPTIONS_SET= [...]
  WITHOUT_[...]                      OPTIONS_UNSET= [...]
  WITHOUT_NLS                        OPTIONS_UNSET= NLS
  NOPORTDOCS                         OPTIONS_UNSET= DOCS
  NOPORTEXAMPLES                     OPTIONS_UNSET= EXAMPLES
  WITH_BDB_VER=[...]                 DEFAULT_VERSIONS+= bdb=[...]
  OVERRIDE_LINUX_BASE_PORT=[...]     DEFAULT_VERSIONS+= linux=[...]
  WITH_OPENSSL_BASE                  DEFAULT_VERSIONS+= ssl=base
  WITH_OPENSSL_PORT                  DEFAULT_VERSIONS+= ssl=port

20171205:
  AFFECTS: users of dns/powerdns
  AUTHOR: krion@FreeBSD.org

  Recursor passthrough removal: This will impact many installations.
  Previously, the PowerDNS Authoritative Server contained a facility
  for sending recursion desired queries to a resolving backend,
  possibly after first consulting its local cache. This feature
  (‘recursor=’) was frequently confusing and also delivered
  inconsistent results, for example when a query ended up referring
  to a CNAME that was outside of the Authoritative Server’s
  knowledge.

20171203:
  AFFECTS: users of sysutils/dsbmd
  AUTHOR: mk@freeshell.de

  Due to new configuration variables and new features, users of dsbmd
  version 0.4.1 and earlier should consider recreating their dsbmd.conf from
  the new dsbmd.conf.sample.

20171130:
  AFFECTS: all ports users
  AUTHOR: adamw@FreeBSD.org

  The ports tree has gained "flavors," which are a way to produce multiple
  variations of a port. Some intended examples of this are language
  modules being produced for multiple language versions, and lite/nox11 packages,
  without needing separate ports for each variation. Python ports have already
  been flavored (see the below entry). Flavor support must be added to
  individual ports.

  Flavors are already supported by make, pkg, poudriere, and synth; see the
  manpages for those tools for usage instructions. Portmaster and portupgrade
  don't support flavors yet, but community work on those tools is in progress.

  Some bumps and breakages are inevitable for a major change such as this.
  Please report breakages and monitor the ports@ list for solutions as they
  become available.

20171130:
  AFFECTS: */py*
  AUTHOR: mat@FreeBSD.org

  Ports using Python via USES=python are now flavored.  All the py3-* ports
  have been removed and folded into their py-* master ports.

  People using Poudriere 3.2+ and binary packages do not have to do anything.

  For other people, to build the Python 3.6 version of, for example,
  databases/py-gdbm, you need to run:

    # make FLAVOR=py36 install

20171126:
  AFFECTS: users of security/p5-openxpki
  AUTHOR: dbaio@FreeBSD.org

  OpenXPKI has been updated to 1.19.4, some important changes were made, please
  see the upgrading documentation for more details:

  http://openxpki.readthedocs.io/en/latest/upgrading.html

20171126:
  AFFECTS: users of mail/sympa
  AUTHOR: dgeo@centrale-marseille.fr

  Web's static dirs have moved to a single dedicated directory.
  Users should review webserver's /static configuration (examples in
  share/examples/sympa).

